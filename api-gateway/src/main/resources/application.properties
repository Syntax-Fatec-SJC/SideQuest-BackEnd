# ====================================
# API GATEWAY - SIDEQUEST
# ====================================

# Application
spring.application.name=api-gateway
server.port=8080

# ====================================
# MICROSERVICES URLS
# ====================================
microservices.usuario.url=http://localhost:8082
microservices.projetos.url=http://localhost:8083
microservices.tarefas.url=http://localhost:8084
microservices.anexos.url=http://localhost:8085
# ====================================
# JWT CONFIGURATION
# ====================================
jwt.secret=SideQuestSecretKey2024ForJWTAuthenticationAndAuthorizationSystem
jwt.expiration=86400000

# ====================================
# CORS CONFIGURATION
# ====================================
cors.allowed-origins=http://localhost:3000,http://localhost:5173
cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# ====================================
# RESILIENCE4J - CIRCUIT BREAKER
# ====================================
resilience4j.circuitbreaker.instances.default.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.default.slidingWindowSize=10
resilience4j.circuitbreaker.instances.default.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.default.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.default.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.default.waitDurationInOpenState=5s
resilience4j.circuitbreaker.instances.default.failureRateThreshold=50
resilience4j.circuitbreaker.instances.default.eventConsumerBufferSize=10

# ====================================
# RESILIENCE4J - RATE LIMITER
# ====================================
resilience4j.ratelimiter.instances.default.limitForPeriod=100
resilience4j.ratelimiter.instances.default.limitRefreshPeriod=1s
resilience4j.ratelimiter.instances.default.timeoutDuration=0s

# ====================================
# RESILIENCE4J - RETRY
# ====================================
resilience4j.retry.instances.default.maxAttempts=3
resilience4j.retry.instances.default.waitDuration=500ms

# ====================================
# ACTUATOR - MONITORING
# ====================================
management.endpoints.web.exposure.include=health,info,metrics,circuitbreakers,ratelimiters
management.endpoint.health.show-details=always
management.health.circuitbreakers.enabled=true
management.health.ratelimiters.enabled=true

# ====================================
# SWAGGER/OPENAPI - CONFIGURAÇÃO COMPLETA
# ====================================
# Habilita documentação OpenAPI
springdoc.api-docs.enabled=true
springdoc.api-docs.path=/v3/api-docs

# Configuração da UI do Swagger
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# IMPORTANTE: Configurações para exibir o botão Authorize
springdoc.swagger-ui.persistAuthorization=true
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.tryItOutEnabled=true

# Desabilita CSRF para facilitar testes no Swagger
springdoc.swagger-ui.csrf.enabled=false

# Configuração de grupos (opcional - descomente se necessário)
# springdoc.group-configs[0].group=usuarios
# springdoc.group-configs[0].paths-to-match=/usuarios/**
# springdoc.group-configs[1].group=projetos
# springdoc.group-configs[1].paths-to-match=/projetos/**
# springdoc.group-configs[2].group=tarefas
# springdoc.group-configs[2].paths-to-match=/tarefas/**

# ====================================
# LOGGING
# ====================================
logging.level.root=INFO
logging.level.com.syntax.api_gateway=DEBUG
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springdoc=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n